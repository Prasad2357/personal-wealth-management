<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Predict Savings</title>
    <link rel="stylesheet" href="/static/style.css">
    <script>
        async function predictSavings(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            const data = Object.fromEntries(formData.entries());
            
            const response = await fetch('/predict', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data),
            });

            const result = await response.json();
            if (response.ok) {
                document.getElementById('predicted_savings').value = result.Predicted_Savings.toFixed(2);
            } else {
                alert(`Error: ${result.error}`);
            }
        }

        async function calculateGoal(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            const data = Object.fromEntries(formData.entries());

            const response = await fetch('/goal', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data),
            });

            const result = await response.json();
            if (response.ok) {
                alert(`Recommendations: ${result.Recommendations.join('\n')}`);
            } else {
                alert(`Error: ${result.error}`);
            }
        }
    </script>
</head>
<body>
    <h1>Desired Savings Prediction</h1>
    <!-- Prediction Form -->
    <form onsubmit="predictSavings(event)">
        <label for="income">Income:</label>
        <input type="number" step="any" name="income" id="income" required><br>
        
        <label for="age">Age:</label>
        <input type="number" name="age" id="age" required><br>
        
        <label for="dependents">Dependents:</label>
        <input type="number" name="dependents" id="dependents" required><br>
        
        <label for="occupation">Occupation:</label>
        <select name="occupation" id="occupation" required>
            <option value="Professional">Professional</option>
            <option value="Self-employed">Self-employed</option>
            <option value="Unemployed">Unemployed</option>
            <option value="Retired">Retired</option>
        </select><br>
        
        <label for="city_tier">City Tier:</label>
        <select name="city_tier" id="city_tier" required>
            <option value="Tier_1">Tier 1</option>
            <option value="Tier_2">Tier 2</option>
            <option value="Tier_3">Tier 3</option>
        </select><br>
        
        <label for="disposable_income">Disposable Income:</label>
        <input type="number" step="any" name="disposable_income" id="disposable_income" required><br>
        
        <label for="total_expenses">Total Expenses:</label>
        <input type="number" step="any" name="total_expenses" id="total_expenses" required><br>
        
        <button type="submit">Predict</button>
    </form>

    <!-- Goal Calculation Form -->
    <h2>Calculate Savings Goal</h2>
    <form onsubmit="calculateGoal(event)">
        <label for="target_amount">Target Amount:</label>
        <input type="number" step="any" name="target_amount" id="target_amount" required><br>
        
        <label for="timeline_months">Timeline (Months):</label>
        <input type="number" name="timeline_months" id="timeline_months" required><br>
        
        <label for="predicted_savings">Predicted Monthly Savings:</label>
        <input type="number" step="any" name="predicted_savings" id="predicted_savings" readonly><br>

        <label for="risk_category">Risk Category:</label>
        <input type="text" name="risk_category" id="risk_category" readonly><br>  <!-- Display risk category -->
        
        <button type="submit">Calculate Goal</button>
    </form>
</body>
</html>
